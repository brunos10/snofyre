<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="topic"/>
<meta name="DC.Title" content="Snofyre Query Model Module"/>
<meta name="abstract" content="This module is a representation of the Snofyre's underlying query formalism as Java classes."/>
<meta name="description" content="This module is a representation of the Snofyre's underlying query formalism as Java classes."/>
<meta name="DC.Relation" scheme="URI" content="../topics/query-services-overview.html"/>
<meta name="DC.Relation" scheme="URI" content="../index.html"/>
<meta name="DC.Relation" scheme="URI" content="../topics/query-services-overview.html"/>
<meta name="DC.Creator" content="http://code.google.com/p/snofyre/"/>
<meta name="DC.Creator" content="Jay Kola"/>
<meta name="DC.Publisher" content="NHS Connecting for Health"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="topic-Snofyre-query-model"/>
<link rel="stylesheet" type="text/css" href="../commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../gsite.css"/>
<title>Snofyre Query Model Module</title>
<script type="text/javascript" src="../prettify-2009-01-08/prettify.js">//filler</script><link rel="stylesheet" type="text/css" href="../prettify-2009-01-08/prettify.css"/><link rel="stylesheet" type="text/css" href="../qwcode.highlight.css"/></head>
<body id="topic-Snofyre-query-model"><a name="topic-Snofyre-query-model"><!-- --></a>

<div class="breadcrumb"><a class="link" href="../index.html" title="TOC">TOC</a> &gt; <a class="link" href="../topics/query-services-overview.html">Snofyre Query Modules and Services</a> &gt; </div>
<h1 class="book_title">Snofyre Functional Services Manual - Draft</h1>

    <h1 class="title topictitle1">Snofyre Query Model Module</h1>

    
    <div class="body"><p class="shortdesc">This module is a representation of the Snofyre's underlying query formalism as Java
        classes.</p>

        <div class="section"><h2 class="title sectiontitle">What is it?</h2>
            
            <p class="p" id="topic-Snofyre-query-model__definition"><a name="topic-Snofyre-query-model__definition"><!-- --></a>This module is a representation of the Snofyre's underlying query formalism as Java
                classes.</p>

        </div>

        <div class="section"><h2 class="title sectiontitle">Why do you need it?</h2>
            
            <p class="p"> 
                While it is possible to create simplistic queries, most clinical queries are in fact complex, 
                using logical operators like 'AND', 'OR', 'NOT', etc. In many cases queries are functional 
                and often nestedm requiring a level of recursion. The query object model representation 
                provided by the <span class="keyword apiname">Snofyre Query Model </span> module allows the programmer to 
                represent and manipulate queries as pure old Java objects. 
            </p>

        </div>

        <div class="section"><h2 class="title sectiontitle">How do you use it?</h2>
            
            <p class="p">The following figure illustrates the main classes implemented in this module. These
                represent the most commonly used aspects of querying. </p>

            <div class="p">
                <div class="fig fignone" id="topic-Snofyre-query-model__uml-class-model"><a name="topic-Snofyre-query-model__uml-class-model"><!-- --></a><span class="figcap">Figure 1. Class Model for Query Objects</span>
                    
                    <img class="image" src="../images/modules/query-model-uml.png" height="83" width="469"/>
                 </div>

            </div>

            <div class="p">
                <div class="fig fignone"><span class="figcap">Figure 2. Class Model for Constraint Objects</span>
                    
                    <img class="image" src="../images/modules/constraint-model-uml.png" height="86" width="512"/>
                </div>

            </div>

            <p class="p">The most important classes in this module are <span class="keyword apiname">QueryExpression</span>,
                <span class="keyword apiname">QueryComponentExpression</span> and <span class="keyword apiname">QueryStatement</span>. 
                The <span class="keyword apiname">QueryExpression</span> class represents the generic query class which 
                provides generic functional behaviour. <span class="keyword apiname">QueryComponentExpression</span> is the 
                class that holds a 'query criterion' which is represented by <span class="keyword apiname">Constraint</span>
                objects, which are shown in Figure . <span class="keyword apiname">QueryStatement</span>s are query objects 
                that contain the human readable representation of queries. 
            </p>

        </div>

        <div class="section"><h2 class="title sectiontitle">Important Classes and Methods</h2>
            
            <div class="p">
                <span class="keyword apiname">QueryExpression</span>
                
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="void" border="1" rules="all"><caption><span class="tablecap">Table 1. Methods in <span class="keyword apiname">QueryExpression</span></span></caption>
                        
                        
                        <thead class="thead" align="left">
                            <tr class="row">
                                <th class="entry" valign="top" width="30%" id="d4854e136">Method Name</th>

                                <th class="entry" valign="top" width="70%" id="d4854e139">Description</th>

                            </tr>

                        </thead>

                        <tbody class="tbody">
                            <tr class="row">
                                <td class="entry" valign="top" width="30%" headers="d4854e136 ">getContainedExpressions</td>

                                <td class="entry" valign="top" width="70%" headers="d4854e139 ">returns all contained <span class="keyword apiname">QueryExpression</span>s in this expression.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" width="30%" headers="d4854e136 ">getParentExpression</td>

                                <td class="entry" valign="top" width="70%" headers="d4854e139 ">gets the <span class="keyword apiname">QueryExpression</span> for this concept.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" width="30%" headers="d4854e136 ">getRunTimeStatus</td>

                                <td class="entry" valign="top" width="70%" headers="d4854e139 ">gets the <span class="keyword apiname">RunTimeStatus</span> that determines if this <tt class="ph tt">SQL</tt> is
                                    generated for this <span class="keyword apiname">QueryExpression</span> during execution.
                                </td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" width="30%" headers="d4854e136 ">getSourceRelationships</td>

                                <td class="entry" valign="top" width="70%" headers="d4854e139 ">gets the <span class="keyword apiname">SnomedRelationship</span>s for this concept is the
                                    source</td>

                            </tr>
 
                            <tr class="row">
                                <td class="entry" valign="top" width="30%" headers="d4854e136 ">getMetadata</td>

                                <td class="entry" valign="top" width="70%" headers="d4854e139 ">gets the <span class="keyword apiname">SnomedRelationship</span>s for this concept is the
                                    target</td>

                            </tr>
                           
                        </tbody>

                    </table>
</div>

                The class also provides methods for getting UUIDs and manipulating contains expressions. 
                Please refer to the Javadocs provided for a complete
                list of methods. </div>

            <div class="p">
                <span class="keyword apiname">QueryComponentExpression</span>
                
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="void" border="1" rules="all"><caption><span class="tablecap">Table 2. Methods in <span class="keyword apiname">QueryComponentExpression</span></span></caption>
                        
                        
                        <thead class="thead" align="left">
                            <tr class="row">
                                <th class="entry" valign="top" width="30%" id="d4854e238">Method Name</th>

                                <th class="entry" valign="top" width="70%" id="d4854e241">Description</th>

                            </tr>

                        </thead>

                        <tbody class="tbody">
                            <tr class="row">
                                <td class="entry" valign="top" width="30%" headers="d4854e238 ">getIncludedConstraint</td>

                                <td class="entry" valign="top" width="70%" headers="d4854e241 ">gets the included <span class="keyword apiname">TerminologyConstraint</span>.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" width="30%" headers="d4854e238 ">getExcludedConstraints</td>

                                <td class="entry" valign="top" width="70%" headers="d4854e241 ">gets the excluded <span class="keyword apiname">TerminologyConstraint</span>s.</td>

                            </tr>

                        </tbody>

                    </table>
</div>

                This class implements methods for adding additional criteria. 
                Please refer to the Javadocs provided for a complete list of methods. </div>

            <div class="p">
                <span class="keyword apiname">QueryStatement</span>
                
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="void" border="1" rules="all"><caption><span class="tablecap">Table 3. Methods in <span class="keyword apiname">QueryStatement</span></span></caption>
                        
                        
                        <thead class="thead" align="left">
                            <tr class="row">
                                <th class="entry" valign="top" width="30%" id="d4854e298">Method Name</th>

                                <th class="entry" valign="top" width="70%" id="d4854e301">Description</th>

                            </tr>

                        </thead>

                        <tbody class="tbody">
                            <tr class="row">
                                <td class="entry" valign="top" width="30%" headers="d4854e298 ">getHumanReadableStatement</td>

                                <td class="entry" valign="top" width="70%" headers="d4854e301 ">gets the human readable representation specified by the author.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" width="30%" headers="d4854e298 ">getLogicalStatement</td>

                                <td class="entry" valign="top" width="70%" headers="d4854e301 ">returns the logical statement form specified by the author.</td>

                            </tr>

                        </tbody>

                    </table>
</div>

                There are other methods for getting the location where this statement is stored. Please refer to the Javadocs
                provided for a complete list of methods. </div>

        </div>

        <div class="section"><h2 class="title sectiontitle">Gotchas</h2>
            
            <div class="note tip"><span class="tiptitle">Tip:</span> Factory classes like <span class="keyword apiname">QueryExpressionFactory</span> are the recommended 
             strategy for creating query objects.</div>

            <div class="note attention"><span class="attentiontitle">Attention:</span> The current implementation does not support execution of <span class="keyword apiname">TemporalConstraint </span>s, 
                even though it allows for them to be created.</div>

            <div class="note note"><span class="notetitle">Note:</span> Use <span class="keyword apiname">QueryUnionExpression</span> and <span class="keyword apiname">QueryIntersectionExpression</span> to 
                represent queries with <span class="keyword apiname">QueryOperatorType</span> operators : OR and AND respectively.
            </div>

        </div>

    </div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../topics/query-services-overview.html">Snofyre Query Modules and Services</a></div>
</div>
</div>
<script type="text/javascript">prettyPrint();</script><div id="gc-footer" dir="ltr">
    <hr/>
    <div class="text">
        This manual is still being updated. We apologise for illustrations that still display Snofyre's developmental name (Sappheiros).
        <div class="notice"> SNOMED CT, Java and MySQL are registered trademarks</div>
    </div>
    <hr/>    
</div>
</body>
</html>